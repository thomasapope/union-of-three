<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sp_player</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>-1</persistent>
  <parentName>PAR_BREAKABLE</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Initialize the player
startx = x;
starty = y;

// Input method
control = 0;

// MOVEMENT STATS
acceleration = .5; // acceleration amount
ground_speed = 5; // maximum speed when on the ground
air_speed = 5; // maximum speed in the air

// Gravity
h = 104; /* height the player can jump */
w = 120; /* half the width the player can jump, width to the crest of jump arc */
jy = y; // used for calculating jump gravity
g = (2 * h * sqr(air_speed)) / sqr(w); // how fast the player falls downward

// Jumping
jump = 0; // used for calculating the height of air jumps
jump_boost = 1; // horizontal speed boost player gets when jumping
max_jumps = 500; // number of jumbs that can be performed in air
air_jumps = max_jumps;

// Initialize Movement Entitiy
initialize_movement_entity( g,       // gravity
                            .2,       // friction
                            0,        // air resistance
                            0,     // bounciness
                            PAR_SOLID);   // collision object

// OTHER STATS                                                      
// Damage Variables
event_inherited();
max_hp = 500;
hp = max_hp; // health
attack = 200; // default damage
mobile = 1; // Player is a moving object
text = 1; // Draw damage text on player when damage is dealt

// Level Variables
access[0] = 1; // Determines access to various channels
access[1] = 0;
access[2] = 0;

// Motion Path Settings
path_frequency = 2; // How often points are added to the path. More is smoother.
path_segments = 20; // How many points to path can have at a time.
motion = path_add();
path_set_closed(motion, false);
path_set_precision(motion, 4);
path_add_point(motion, x, y, 100);
alarm[0] = path_frequency;


</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// A Note on Gravity Presets
/* 
 Gravity (g) is based on the maximum height (h) and width (w) of a jump.
 Larger values for h or w will result in higher jumps and less gravity.
 
 Different presets of gravity are used for different situations. The
 presets for each situation are below along with notes on feeling.
 
 Default - On ground, in air without jump
 // Medium. Good mix of fast and floaty.
 // Set whenever player is on ground
    h = 96;
    w = 120;
    .3333
 Jump Initial - Rising action of jump arc
 // Fast lift. Feels kinetic. 
 // 
    h = 
    w = 
 Jump Middle - Crest of jump arc
 // Tranisition from Jump Initial to Jump Final
 // 
    h = 
    w = 
 Jump Final - Latter half of jump arc
 // Gentle Fall. Time to Relax. Slower than Default.
 // 
    h = 
    w = 
 Wall Jump - Jumping off a wall
 // 
    h = 
    w = 
*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>path_delete(motion);
ob_camera.control = 3;
game_restart();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Motion Path Timer

if (global.debug  = 1) {
    if (hsp[0] != 0 || vsp[0] != 0) {
        // Add a new point to the path
        path_add_point(motion, x, y-8, 100);
        
        // Remove the oldest point from the path
        if (path_get_number(motion) == path_segments ) 
            path_delete_point(motion, 0);
    } else {
        if (path_get_number(motion) &gt; 0) 
            path_delete_point(motion, 0);
    }
}

// Reset this alarm
alarm[0] = path_frequency;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*if (place_meeting(x, y+1, PAR_SOLID)) {
    if (vsp[0] &gt; 30) {
        hp -= 50;
    }
}*/

// Kill the Player
if (hp = 0 || y &gt; room_height || y &lt; 0) {
    sc_death();
}

// Get Player Controls
get_controls(); 

// Enable platform movement actions
enable_movement_player_actions(   acceleration, 
                                    ground_speed, 
                                    air_speed,
                                    key_jump,
                                    key_jump_release,
                                    key_jump_press,
                                    xaxis);

// This script might not work for every kind of sprite set but it will work for a basic
// set and will show how you could get started if you want to add more
enable_movement_platform_sprites(sp_player, sp_player, sp_player_jump, .25);

// Move the entity
move_movement_entity(20);

// Enable debug mode
if keyboard_check_pressed(ord('G')) 
    global.debug *= -1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="PAR_DOOR">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Go through door
if ((x &lt; 0 || x &gt; room_width) || (key_down_press)) {
    /* 
        If door is outside the border of the room, 
        it does not have to be interacted with to 
        be passed through. 
    */
    if room_exists(other.new_room) {
        room_goto(other.new_room);
        x = other.new_x;
        y = other.new_y;
        //path_clear_points(motion);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="75">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>switch(async_load[? "event_type"])             // Parse the async_load map to see which event has been triggered
{
case "gamepad discovered":
    control = 1;
    break;
case "gamepad lost":
    control = 0;
    break;
}

ob_head.control = control;
ob_arm.control = control;
ob_camera.control = control;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Room Start Setup
// Move to Checkpoint
if (global.checkpointr == room) {
    x = global.checkpointx;
    y = global.checkpointy;
}

sc_player_clear();

// Create Body Parts     
if !instance_exists(ob_camera) {         
    var cam = instance_create(x, y, ob_camera);
        cam.control = control;
        cam.target = self;
}
var head = instance_create(x,y,ob_head);
    head.creator = id;
    head.control = control;
var arm = instance_create(x,y,ob_arm);
    arm.creator = id;
    arm.control = control;
    arm.shot_delay = 6; // Time between shots
    arm.vari = 1; // The Level of inaccuracy in shots. Higher is less accurate
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Draw debug stuff
if (global.debug = 1) {
    // Draw health
    draw_set_font(fn_01);
    draw_set_halign(fa_center);
    draw_set_valign(fa_bottom);
    draw_text(x, y-24, string(hp));
    
    // Draw motion path
    draw_set_color(c_white);
    draw_path(motion, x, y, true);
}

// Draw self
draw_self();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
