<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sp_parent_mask</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1</depth>
  <persistent>-1</persistent>
  <parentName>PAR_BREAKABLE</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// INITIALIZE THE PLAYER
event_inherited();
state = player_state_move;
empowered = 0; // has kinesis
walking = 1;
weapon = 0;

// Body Parts
head = noone;
arm = noone;

// INPUT VARIABLES
control = 0;
pad_num = 0;

// MOVEMENT STATS
WALK_SPEED = 3;
RUN_SPEED = 5;
AIR_SPEED = 5;
GROUND_ACCELERATION = .3;
AIR_ACCELERATION = .4;
FRICTION = .2;
AIR_RESISTANCE = 0;
BOUNCINESS = 0;

groundspd = 0;
airspd = 0;
acc = GROUND_ACCELERATION;
hsp_dir = 1;

// Jumping
MAX_JUMPS = 5; // horizontal speed boost player gets when jumping
JUMP_BOOST = 1; // number of jumbs that can be performed in air

jy = y; // used to calculate jump stages
jump = 0; // used for calculating the height of air jumps
air_jumps = MAX_JUMPS;

// Presets
/*jump_height[0] = 104;   jump_width[0] = 120;    // Preset: Default

jump_height[1] = 40;    jump_width[1] = 32;     // Preset: Powerless Jump
jump_height[2] = 64;   jump_width[2] = 56;    // Preset: Jump Middle
jump_height[3] = 64;   jump_width[3] = 64;    // Preset: Jump Final

jump_height[4] = 96;    jump_width[4] = 80;     // Preset: Powered Jump
jump_height[5] = 104;   jump_width[5] = 128;    // Preset: Jump Middle
jump_height[6] = 104;   jump_width[6] = 178;    // Preset: Jump Final*/

// Jump height and gravity presets
height[0] = 104;    jump_height[0] = 8.66;      g[0] = .36; // Preset: Default

height[1] = 40;     jump_height[1] = 7.5;       g[1] = .70; // Preset: Powerless Jump
height[2] = 64;     jump_height[2] = 6.86;      g[2] = .55; // Preset: Jump Middle

height[4] = 96;     jump_height[4] = 12;        g[4] = .75; // Preset: Powered Jump
height[5] = 104;    jump_height[5] = 8.125;     g[5] = .32; // Preset: Jump Middle

// Ledge Grabbing
GRAB_HEIGHT = 8; // Determines the position for the grab check and sprite placement
GRAB_DISTANCE = 10;

// Initialize Movement Entitiy
initialize_movement_entity( g[0],       // gravity
                            FRICTION,       // friction
                            AIR_RESISTANCE,        // air resistance
                            BOUNCINESS,     // bounciness
                            PAR_SOLID);   // collision object

// COMBAT STATS     
MAX_HP = 500;
hp = MAX_HP;

// MISC SETTINGS AND VARIABLES
// Motion Path Settings
MOTION_FREQUENCY = 2; // How often points are added to the path. More is smoother.
MOTION_SEGMENTS = 20; // How many points to path can have at a time.
motion = path_add();
path_set_closed(motion, false);
path_set_precision(motion, 4);
path_add_point(motion, x, y, 100);
alarm[0] = MOTION_FREQUENCY;

startx = x; // Used for resetting after death
starty = y;

mobile = 1; // Player is a moving object
text = 1; // Draw damage text on player when damage is dealt
crit = 1;
crit_location = player_crit;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>sc_player_clear();
//ob_camera.control = 3;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Acceleration Timer
if (!ground) {
    acc = AIR_ACCELERATION;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Motion Path Timer

if (global.debug  = 1) {
    if (hsp[0] != 0 || vsp[0] != 0) {
        // Add a new point to the path
        path_add_point(motion, x, y-8, 100);
        
        // Remove the oldest point from the path
        if (path_get_number(motion) == MOTION_SEGMENTS ) 
            path_delete_point(motion, 0);
    } else {
        if (path_get_number(motion) &gt; 0) 
            path_delete_point(motion, 0);
    }
}

// Reset this alarm
alarm[0] = MOTION_FREQUENCY;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// UNIVERSAL STEP EVENT
/** runs regardless of which state the player is in **/

// Ground check
var EARLY_JUMP = 5; // must be at least 1
ground = place_meeting(x, y+EARLY_JUMP, collision_object); 

// Check if dead
if (hp = 0 || y &gt; room_height || y &lt; 0 || x &gt; room_width || x &lt; 0) {
    sc_death();
}

// Get player controls
get_controls(); 

// Switch between walking and running
if (keyboard_check_pressed(vk_shift)) {
    walking = toggle(walking);
}
if (keyboard_check_pressed(vk_enter)) {
    empowered = toggle(empowered);
}

// Change Weapons
if (mouse_wheel_up()) { // Next
    if (weapon &lt; global.weapons) {
        weapon++;
    } else {
        weapon = 0;
    }
}
if (mouse_wheel_down()) { // Previous
    if (weapon &gt; 0) {
        weapon--;
    } else {
        weapon = global.weapons;
    }
}

// EXECUTE PLAYER STATE
script_execute(state);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Room Start Setup

// Move to Checkpoint
if (global.checkpointr == room) {
    x = global.checkpointx;
    y = global.checkpointy;
}

// Start room on ground
/*while (!place_meeting(x, y+1, collision_object)) {
    y += 1;
}*/

// Create body parts
sc_create_player_parts();

// Visual cleanup
sc_player_clear();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Draw debug stuff
if (global.debug == 1) {
    // Draw health
    /*draw_set_color(c_white);
    draw_set_font(fn_01);
    draw_set_halign(fa_center);
    draw_set_valign(fa_bottom);
    
    draw_text(x, y-24, string(hp)); // hp
    draw_text(x, y-34, string(control) + ", " + string(pad_num)); // control and pad_num*/
    
    // Draw motion path
    //draw_path(motion, x, y, true);
}

// Draw self
draw_self();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
