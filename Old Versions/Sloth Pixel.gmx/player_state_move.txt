///player_state_move()
/**
 *  Main player state
 *
 *  Player can move freely and perform all platform actions
**/                            

// Set Gravity - Preset: Default
if (ground) {
    grav = g[0];
    acc = GROUND_ACCELERATION;
}

// Determine groundspd and airspd
var groundspd, airspd;
if (walking) { // player is walking
    groundspd = WALK_SPEED;
    airspd = 4;
    fric = FRICTION + .1;
} else { // player is running
    groundspd = RUN_SPEED;
    airspd = AIR_SPEED;
    fric = FRICTION; // slighlty increased friction for grip
}

// Empowered ?
var preset;
if (empowered) {
    preset = 4;
    
    // Enable empowered movement options
    enable_movement_wall_hang(airspd, key_jump, key_jump_press, xaxis);
    enable_movement_air_jump(key_jump_press, xaxis, airspd);
} else {
    preset = 1;
}

// Enable universal movement options
enable_movement_run(acc, groundspd, airspd, xaxis);
enable_movement_jump_new(key_jump_press, key_jump_release, key_jump, xaxis, airspd, preset);

// Get direction of hsp             
if (xaxis != 0) {
    hsp_dir = sign(hsp[0]);
}

// Move the entity
move_movement_entity(20);

// Enable ledge grabbing
enable_movement_ledge_grab();
